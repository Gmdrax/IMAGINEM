<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>IMAGINEM - L'App</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;700;800&display=swap" rel="stylesheet">
    
    <style>
        body { 
            font-family: 'Plus Jakarta Sans', sans-serif; 
            background-color: #050505; 
            margin: 0;
            overflow: hidden; /* Evita scroll en el body principal */
        }
        
        /* Ocultar scrollbar */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        /* Animaciones */
        @keyframes float {
            0% { transform: translate(0px, 0px) scale(1); }
            33% { transform: translate(30px, -50px) scale(1.1); }
            66% { transform: translate(-20px, 20px) scale(0.9); }
            100% { transform: translate(0px, 0px) scale(1); }
        }
        @keyframes float-delayed {
            0% { transform: translate(0px, 0px) scale(1); }
            33% { transform: translate(-30px, 50px) scale(1.2); }
            66% { transform: translate(20px, -30px) scale(0.8); }
            100% { transform: translate(0px, 0px) scale(1); }
        }
        .animate-float { animation: float 15s ease-in-out infinite; }
        .animate-float-delayed { animation: float-delayed 18s ease-in-out infinite; }
        
        /* Marco del tel√©fono para Desktop */
        @media (min-width: 640px) {
            #root {
                display: flex;
                align-items: center;
                justify-content: center;
                min-height: 100vh;
                background-image: radial-gradient(circle at 50% 50%, #1a1a1a 0%, #000 100%);
            }
            .phone-frame {
                width: 400px;
                height: 850px;
                border-radius: 50px;
                box-shadow: 
                    0 0 0 12px #333,
                    0 0 0 14px #444,
                    0 50px 100px rgba(0,0,0,0.8);
                overflow: hidden;
                position: relative;
                border: 8px solid #222;
                background: #000;
            }
            /* Notch simulado */
            .phone-frame::before {
                content: '';
                position: absolute;
                top: 0;
                left: 50%;
                transform: translateX(-50%);
                width: 150px;
                height: 30px;
                background: #222;
                border-bottom-left-radius: 20px;
                border-bottom-right-radius: 20px;
                z-index: 100;
            }
        }

        /* Estilos m√≥viles nativos */
        @media (max-width: 639px) {
            .phone-frame {
                width: 100%;
                height: 100vh;
                border-radius: 0;
                border: none;
            }
        }
        
        .theme-transition {
            transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }
    </style>

    <!-- Import Map para React y Lucide -->
    <script type="importmap">
    {
      "imports": {
        "react": "https://esm.sh/react@18.2.0",
        "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
        "lucide-react": "https://esm.sh/lucide-react@0.294.0"
      }
    }
    </script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>

    <div id="root"></div>

    <script type="text/babel" data-type="module">
        import React, { useState, useEffect, useRef } from 'react';
        import { createRoot } from 'react-dom/client';
        import { 
            Shield, Eye, EyeOff, Zap, Ghost, CreditCard, RefreshCw, 
            Clock, TrendingUp, AlertTriangle, CheckCircle, Activity, 
            Plane, Bot, Sparkles, Menu, ArrowUpRight, ArrowDownLeft,
            PieChart, Lock, Globe, Smartphone, Search, X, ChevronRight,
            Wallet, Layers, MapPin, Navigation, Map as MapIcon, Target,
            Gift, Percent, Ticket, Leaf, ShoppingBag, Award, ZapOff, ChevronUp,
            Globe2, RefreshCcw, Landmark, Umbrella, Coffee
        } from 'lucide-react';

        const App = () => {
            // --- ESTATS GLOBALS ---
            const [loading, setLoading] = useState(true);
            const [activeTab, setActiveTab] = useState('dashboard'); 
            const [lifeMode, setLifeMode] = useState(false); 
            const [privacyMode, setPrivacyMode] = useState(false);
            const [showAiModal, setShowAiModal] = useState(false);
            const [isTransitioning, setIsTransitioning] = useState(false); 

            // Dades
            const [salary] = useState(2450);
            const workHoursPerMonth = 160;
            const realHourlyWage = salary / workHoursPerMonth; 
            const [userLevel, setUserLevel] = useState(12);
            const [balance, setBalance] = useState(1450.50);
            const [ecoPoints, setEcoPoints] = useState(850);

            // Flow
            const buckets = [
                { id: 'fixed', name: 'Despeses Fixes', percent: 50, amount: 1225, color: 'bg-blue-500' },
                { id: 'savings', name: 'Estalvi Auto', percent: 20, amount: 490, color: 'bg-[#00e0b0]' },
                { id: 'fun', name: 'Guilt-Free', percent: 30, amount: 735, color: 'bg-purple-500' },
            ];

            // Ofertes
            const offers = [
                { id: 1, brand: 'Booking.com', discount: '4% Cashback', type: 'Viatges', pointsCost: 200, bg: 'bg-blue-600' },
                { id: 2, brand: 'PortAventura', discount: '2x1 Entrades', type: 'Oci', pointsCost: 500, bg: 'bg-yellow-500' },
                { id: 3, brand: 'Starbucks', discount: 'Caf√® Gratis', type: 'Caf√©', pointsCost: 150, bg: 'bg-green-600' },
            ];

            // Seguretat
            const ghostCards = [
                { id: 1, name: 'Amazon One-Time', number: '**** 4242', exp: '24h', status: 'active', alias: 'Alex T.' },
            ];

            const subscriptions = [
                { id: 1, name: 'Netflix 4K', cost: 19.99, previousCost: 17.99, icon: 'N', color: 'bg-red-600', trend: 'up' }, 
                { id: 2, name: 'Spotify Duo', cost: 12.99, previousCost: 12.99, icon: 'S', color: 'bg-green-500', trend: 'stable' },
                { id: 3, name: 'Adobe Cloud', cost: 64.99, previousCost: 64.99, icon: 'A', color: 'bg-blue-600', trend: 'stable' }, 
            ];

            // Global
            const currencies = [
                { code: 'EUR', name: 'Euro', symbol: '‚Ç¨', balance: 1450.50, flag: 'üá™üá∫', rate: 1 },
                { code: 'USD', name: 'D√≤lar USA', symbol: '$', balance: 320.00, flag: 'üá∫üá∏', rate: 1.09 },
                { code: 'JPY', name: 'Ien Japon√®s', symbol: '¬•', balance: 45000, flag: 'üáØüáµ', rate: 163.50 },
            ];

            const [activeTrip] = useState({
                destination: 'T√≤quio, Jap√≥',
                dates: '10 - 24 Oct',
                budget: 3000,
                spent: 1250,
                currency: 'JPY'
            });

            // Xat IA
            const [aiMessages, setAiMessages] = useState([
                { id: 1, role: 'ai', text: 'Bon dia! He notat que et sobren 50‚Ç¨ a la categoria "Oci". Vols que els mogui a Inversi√≥?' }
            ]);
            const [inputMsg, setInputMsg] = useState('');
            const messagesEndRef = useRef(null);

            useEffect(() => {
                const timer = setTimeout(() => setLoading(false), 2500);
                return () => clearTimeout(timer);
            }, []);

            useEffect(() => {
                messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });
            }, [aiMessages, showAiModal]);

            const handleTabChange = (newTab) => {
                if (activeTab === newTab) return;
                setIsTransitioning(true);
                setTimeout(() => {
                    setActiveTab(newTab);
                    setIsTransitioning(false);
                    const content = document.getElementById('main-content');
                    if(content) content.scrollTop = 0;
                }, 150);
            };

            const formatValue = (amount, currencyCode = 'EUR') => {
                if (lifeMode && currencyCode === 'EUR') {
                    const hours = amount / realHourlyWage;
                    const h = Math.floor(hours);
                    const m = Math.round((hours - h) * 60);
                    return `${h}h ${m}m`;
                }
                const symbol = currencies.find(c => c.code === currencyCode)?.symbol || '‚Ç¨';
                return `${symbol} ${new Intl.NumberFormat('ca-ES').format(amount)}`;
            };

            const Sensitive = ({ children }) => (
                <span className={`transition-all duration-700 ${privacyMode ? 'blur-md select-none opacity-50' : ''}`}>
                    {children}
                </span>
            );

            // --- COMPONENTS ---
            const GlassCard = ({ children, className = "", onClick, highlight = false }) => (
                <div 
                    onClick={onClick}
                    className={`relative overflow-hidden transition-all duration-500 backdrop-blur-xl border ${
                        lifeMode 
                        ? `bg-gray-900/60 ${highlight ? 'border-[#00e0b0]/50 shadow-[0_0_20px_rgba(0,224,176,0.1)]' : 'border-white/10'} hover:bg-gray-800/60` 
                        : `bg-white/80 ${highlight ? 'border-blue-200 shadow-blue-100' : 'border-white/60'} shadow-lg shadow-blue-900/5 hover:bg-white/90`
                    } rounded-[2rem] ${className}`}
                >
                    {children}
                </div>
            );

            const ModeToggle = () => (
                <button 
                    onClick={() => setLifeMode(!lifeMode)}
                    className={`relative h-10 px-4 rounded-full flex items-center gap-2 transition-all duration-500 overflow-hidden ${
                        lifeMode ? 'bg-gray-800 text-white w-32 shadow-[0_0_15px_rgba(0,224,176,0.2)]' : 'bg-white text-black shadow-md w-32'
                    }`}
                >
                    <div className={`absolute inset-0 bg-gradient-to-r from-[#00e0b0] via-blue-500 to-purple-600 opacity-20 transition-opacity duration-500 ${lifeMode ? 'opacity-100' : 'opacity-0'}`} />
                    <Clock size={16} className={`relative z-10 ${lifeMode ? 'text-white' : 'text-[#00e0b0]'}`} />
                    <span className="relative z-10 text-xs font-bold tracking-wider">
                        {lifeMode ? 'LIFE ON' : 'BANK ON'}
                    </span>
                </button>
            );

            const NavBtn = ({ icon, active, onClick, lifeMode }) => (
                <button 
                    onClick={onClick}
                    className={`p-3.5 rounded-full transition-all duration-300 relative group ${
                    active 
                        ? (lifeMode ? 'text-white bg-white/10 shadow-[0_0_15px_rgba(255,255,255,0.1)]' : 'text-black bg-black/5') 
                        : (lifeMode ? 'text-gray-600 hover:text-gray-300' : 'text-gray-400 hover:text-gray-600')
                    }`}
                >
                    <div className={`transform transition-transform duration-300 ${active ? 'scale-110' : 'group-hover:scale-110'}`}>
                        {icon}
                    </div>
                    {active && (
                    <span className={`absolute -bottom-1 left-1/2 -translate-x-1/2 w-1 h-1 rounded-full theme-transition ${
                        lifeMode ? 'bg-[#00e0b0]' : 'bg-black'
                    }`}></span>
                    )}
                </button>
            );

            // --- VISTES ---
            const DashboardView = () => (
                <div className="animate-in fade-in slide-in-from-bottom-8 duration-700 pb-28 space-y-6">
                    <div className="flex justify-between items-end px-1">
                        <div>
                            <p className={`text-sm font-medium mb-1 ${lifeMode ? 'text-gray-400' : 'text-gray-500'}`}>Bon dia, Alex</p>
                            <h1 className={`text-3xl font-black tracking-tight ${lifeMode ? 'text-white' : 'text-gray-900'}`}>El teu Resum</h1>
                        </div>
                        <div className="flex flex-col items-end">
                            <div className={`w-10 h-10 rounded-full flex items-center justify-center font-black text-sm border-2 transition-all ${lifeMode ? 'bg-gray-800 border-[#00e0b0] text-[#00e0b0]' : 'bg-black text-white border-transparent'}`}>{userLevel}</div>
                            <span className="text-[10px] font-bold text-[#00e0b0] mt-1">NIVELL PRO</span>
                        </div>
                    </div>
                    <GlassCard className="p-8 min-h-[220px] flex flex-col justify-between">
                        <div className="flex justify-between items-start">
                            <div className={`px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-wider border ${lifeMode ? 'bg-white/10 text-white border-white/20' : 'bg-gray-100 text-gray-500 border-gray-200'}`}>Compte Principal</div>
                            <img src="https://upload.wikimedia.org/wikipedia/commons/5/5e/Visa_Inc._logo.svg" alt="Visa" className="h-4 opacity-50 grayscale" />
                        </div>
                        <div className="space-y-1">
                            <p className={`text-5xl font-black tracking-tighter transition-all duration-700 ${lifeMode ? 'text-white' : 'text-gray-900'}`}><Sensitive>{formatValue(balance)}</Sensitive></p>
                            <p className={`text-sm font-medium flex items-center gap-2 ${lifeMode ? 'text-gray-400' : 'text-gray-500'}`}><span className="w-2 h-2 rounded-full bg-green-500 animate-pulse"></span> Disponible per gastar avui</p>
                        </div>
                        <div className="flex gap-3">
                            <button className={`flex-1 py-3 rounded-xl text-xs font-bold transition-all active:scale-95 ${lifeMode ? 'bg-white/10 text-white' : 'bg-black text-white'}`}>Ingressar</button>
                            <button className={`flex-1 py-3 rounded-xl text-xs font-bold transition-all active:scale-95 ${lifeMode ? 'bg-white/10 text-white' : 'bg-gray-100 text-black'}`}>Enviar</button>
                        </div>
                    </GlassCard>
                    <GlassCard className="p-1 flex items-center gap-3 pr-4" onClick={() => setShowAiModal(true)}>
                        <div className="bg-gradient-to-tr from-[#00e0b0] to-blue-500 w-12 h-12 rounded-[1.5rem] flex items-center justify-center shadow-lg"><Bot size={24} className="text-white" /></div>
                        <div className="flex-1">
                            <p className={`text-xs font-bold ${lifeMode ? 'text-white' : 'text-gray-900'}`}>ImaginAI</p>
                            <p className="text-[10px] text-gray-400 truncate">Suggeriment: Mou 50‚Ç¨ a inversi√≥...</p>
                        </div>
                        <div className={`w-8 h-8 rounded-full flex items-center justify-center ${lifeMode ? 'bg-white/10' : 'bg-gray-100'}`}><ChevronRight size={16} className="text-gray-400" /></div>
                    </GlassCard>
                </div>
            );

            // Travel View
            const TravelView = () => {
                const [amount, setAmount] = useState(100);
                const [currency, setCurrency] = useState('USD');
                const [budgetStatus, setBudgetStatus] = useState('idle');
                const rates = { USD: 1.08, JPY: 163.5, GBP: 0.85 };

                return (
                <div className="pb-28 space-y-6 animate-in slide-in-from-right duration-500">
                    <div className="px-1">
                    <h2 className={`text-2xl font-black tracking-tight mb-1 theme-transition ${lifeMode ? 'text-white' : 'text-gray-900'}`}>Global Citizen</h2>
                    <p className={`text-xs font-medium theme-transition ${lifeMode ? 'text-gray-400' : 'text-gray-500'}`}>Viatja sense fronteres i sense comissions.</p>
                    </div>

                    <GlassCard className="p-6 relative overflow-hidden" highlight>
                        <div className="absolute top-0 right-0 p-6 opacity-10 animate-float-delayed"><Globe2 size={120} /></div>
                        <div className="relative z-10">
                            <h3 className={`text-xl font-bold mb-2 theme-transition ${lifeMode ? 'text-white' : 'text-gray-900'}`}>Eliminem les fronteres</h3>
                            <p className={`text-sm opacity-80 mb-6 theme-transition ${lifeMode ? 'text-gray-300' : 'text-gray-600'}`}>Gestiona el canvi de divises en temps real.</p>
                            <div className={`p-4 rounded-2xl mb-4 backdrop-blur-sm border theme-transition ${lifeMode ? 'bg-black/20 border-white/10' : 'bg-white/50 border-gray-200'}`}>
                                <div className="flex justify-between items-center mb-2"><span className="text-xs font-bold uppercase opacity-60">Tu pagues (EUR)</span><input type="number" value={amount} onChange={(e) => setAmount(e.target.value)} className="bg-transparent text-right font-mono font-bold w-20 outline-none" /></div>
                                <div className="h-px w-full bg-current opacity-10 my-2"></div>
                                <div className="flex justify-between items-center"><select value={currency} onChange={(e) => setCurrency(e.target.value)} className="bg-transparent font-bold outline-none cursor-pointer"><option value="USD" className="text-black">USD ($)</option><option value="JPY" className="text-black">JPY (¬•)</option></select><span className="font-mono font-bold text-xl">{(amount * rates[currency]).toFixed(2)}</span></div>
                            </div>
                            <button onClick={() => { setBudgetStatus('calculating'); setTimeout(() => setBudgetStatus('done'), 2000); }} disabled={budgetStatus !== 'idle'} className={`w-full py-3 rounded-xl font-bold text-xs flex items-center justify-center gap-2 transition-all duration-300 shadow-lg active:scale-95 ${budgetStatus === 'done' ? 'bg-green-500 text-white' : 'bg-[#00e0b0] text-black'}`}>{budgetStatus === 'idle' && <><Sparkles size={16} /> Organitzar Pressupost</>}{budgetStatus === 'calculating' && <><RefreshCw className="animate-spin" size={16} /> La IA est√† calculant...</>}{budgetStatus === 'done' && <><CheckCircle size={16} /> Pressupost llest!</>}</button>
                        </div>
                    </GlassCard>
                </div>
                );
            };

            const MapView = () => (
                <div className="h-full flex flex-col pb-28 relative animate-in fade-in zoom-in duration-500">
                    <div className="absolute top-0 left-0 right-0 h-32 bg-gradient-to-b from-black/50 to-transparent pointer-events-none z-10"></div>
                    <div className={`flex-1 rounded-[2.5rem] overflow-hidden relative shadow-2xl border transition-all duration-700 ${lifeMode ? 'border-white/10 bg-[#121212]' : 'border-gray-200 bg-[#f0f2f5]'} min-h-[500px]`}>
                        <div className="absolute inset-0" style={{ backgroundImage: lifeMode ? `linear-gradient(#222 2px, transparent 2px), linear-gradient(90deg, #222 2px, transparent 2px)` : `linear-gradient(#e5e7eb 2px, transparent 2px), linear-gradient(90deg, #e5e7eb 2px, transparent 2px)`, backgroundSize: '40px 40px' }}></div>
                        <div className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-30">
                            <div className="absolute inset-0 rounded-full bg-blue-500/30 animate-ping"></div>
                            <div className="w-4 h-4 bg-blue-500 border-2 border-white rounded-full relative z-10 shadow-lg"></div>
                        </div>
                        {[{ top: '25%', left: '20%', type: 'shop', name: 'Zara', bonus: '5% Cashback', color: 'bg-[#00e0b0]', icon: RefreshCw }, { top: '65%', left: '70%', type: 'atm', name: 'CaixaBank', bonus: 'Sin Comisi√≥n', color: 'bg-blue-500', icon: CreditCard }].map((pin, i) => (
                            <div key={i} className="absolute flex flex-col items-center group cursor-pointer z-20" style={{ top: pin.top, left: pin.left }}>
                                <div className={`w-12 h-12 ${pin.color} rounded-full rounded-br-none rotate-45 flex items-center justify-center shadow-lg border-2 border-white`}><div className="-rotate-45 text-white"><pin.icon size={18} /></div></div>
                            </div>
                        ))}
                    </div>
                </div>
            );

            // Flow View
            const FlowView = () => (
                <div className="pb-28 space-y-8 animate-in slide-in-from-right duration-500">
                    <div className="text-center py-6">
                        <p className="text-[#00e0b0] font-bold text-xs tracking-widest uppercase mb-2">Self-Driving Money</p>
                        <h2 className={`text-3xl font-black ${lifeMode ? 'text-white' : 'text-gray-900'}`}>Tu N√≥mina,<br/>Piloto Autom√°tico.</h2>
                    </div>
                    <div className="relative py-4">
                        <div className="flex justify-center mb-10 relative z-10"><div className="bg-gradient-to-r from-gray-900 to-black text-white px-8 py-5 rounded-[2rem] shadow-2xl border border-gray-800 flex flex-col items-center min-w-[200px]"><span className="text-xs text-gray-400 mb-1 font-medium tracking-wide">ENTRADA MENSUAL</span><span className="text-3xl font-bold"><Sensitive>{formatValue(salary)}</Sensitive></span></div></div>
                        <div className="grid grid-cols-3 gap-3 relative z-10 px-1">{buckets.map((bucket) => (<GlassCard key={bucket.id} className="p-3 flex flex-col items-center text-center pt-6"><div className={`w-4 h-4 rounded-full ${bucket.color} mb-3 shadow-[0_0_15px_rgba(0,0,0,0.2)] ring-4 ring-white/5`}></div><p className={`text-[10px] font-bold uppercase tracking-wide mb-1 ${lifeMode ? 'text-gray-400' : 'text-gray-500'}`}>{bucket.name}</p><p className={`text-lg font-black ${lifeMode ? 'text-white' : 'text-gray-900'}`}>{bucket.percent}%</p></GlassCard>))}</div>
                    </div>
                </div>
            );

            // Hub View
            const HubView = () => (
                <div className="pb-28 space-y-8 animate-in slide-in-from-right duration-500">
                    <div className="px-1"><h2 className={`text-2xl font-black tracking-tight mb-1 ${lifeMode ? 'text-white' : 'text-gray-900'}`}>Safe Zone</h2></div>
                    <GlassCard className="p-5" highlight><div className="flex justify-between items-center"><h3 className={`text-sm font-bold ${lifeMode ? 'text-white' : 'text-gray-900'}`}>Targeta Fantasma</h3><Zap size={20} className="text-yellow-400" /></div><div className="mt-4 p-4 rounded-xl bg-gradient-to-br from-gray-800 to-black text-white"><p className="font-mono text-xl tracking-widest">**** 4242</p><div className="flex justify-between text-xs mt-2 text-gray-400"><span>EXP: 24h</span><span>√öS √öNIC</span></div></div></GlassCard>
                </div>
            );

            // SPLASH SCREEN
            if (loading) {
                return (
                    <div className="min-h-screen bg-black flex flex-col items-center justify-center p-6 text-center animate-out fade-out duration-1000 delay-2000 fill-mode-forwards">
                        <div className="w-20 h-20 bg-gradient-to-tr from-[#00e0b0] to-blue-600 rounded-3xl flex items-center justify-center mb-6 animate-bounce"><span className="text-4xl font-black text-white">im</span></div>
                        <h1 className="text-4xl font-black text-white mb-2 tracking-tight">IMAGINEM</h1>
                        <p className="text-[#00e0b0] font-medium text-lg animate-pulse">Gestionant moments...</p>
                        <p className="text-gray-500 text-sm mt-8 max-w-xs mx-auto">"Imagina una banca on el temps √©s, literalment, diners."</p>
                    </div>
                );
            }

            return (
                <div className="phone-frame theme-transition">
                    <div className={`h-full w-full font-sans theme-transition overflow-hidden relative flex flex-col ${lifeMode ? 'bg-[#050505]' : 'bg-[#f2f6f9]'}`}>
                        
                        {/* Background Blobs */}
                        {lifeMode && (
                            <div className="absolute inset-0 pointer-events-none overflow-hidden z-0">
                                <div className="absolute top-[-10%] left-[-10%] w-[300px] h-[300px] rounded-full blur-[80px] opacity-20 bg-[#00e0b0]"></div>
                                <div className="absolute bottom-[-10%] right-[-10%] w-[300px] h-[300px] rounded-full blur-[80px] opacity-20 bg-purple-600"></div>
                            </div>
                        )}

                        {/* HEADER */}
                        <div className={`px-6 pt-14 pb-4 flex justify-between items-center sticky top-0 z-50 theme-transition ${lifeMode ? 'bg-black/50 backdrop-blur-xl border-b border-white/5' : 'bg-white/70 backdrop-blur-xl border-b border-gray-200/50'}`}>
                            <div className="flex items-center gap-2.5">
                                <div className="w-9 h-9 bg-black rounded-xl flex items-center justify-center text-white font-black text-sm shadow-xl">im</div>
                                <span className={`font-bold text-xl tracking-tight theme-transition ${lifeMode ? 'text-white' : 'text-black'}`}>IMAGINEM</span>
                            </div>
                            <div className="flex gap-3">
                                <ModeToggle />
                                <button onClick={() => setPrivacyMode(!privacyMode)} className={`w-11 h-11 rounded-full flex items-center justify-center theme-transition ${lifeMode ? 'bg-white/10 text-white' : 'bg-white text-gray-600 shadow-sm'}`}>{privacyMode ? <EyeOff size={18} /> : <Eye size={18} />}</button>
                            </div>
                        </div>

                        {/* CONTENT */}
                        <div id="main-content" className={`flex-1 px-6 pt-6 overflow-y-auto custom-scrollbar relative z-10 scroll-smooth transition-opacity duration-200 ${isTransitioning ? 'opacity-0 translate-y-4' : 'opacity-100 translate-y-0'}`}>
                            {activeTab === 'dashboard' && <DashboardView />}
                            {activeTab === 'map' && <MapView />}
                            {activeTab === 'travel' && <TravelView />}
                            {activeTab === 'flow' && <FlowView />}
                            {activeTab === 'hub' && <HubView />}
                        </div>

                        {/* NAV */}
                        <div className="absolute bottom-8 left-0 right-0 flex justify-center z-50 pointer-events-none px-4">
                            <div className={`pointer-events-auto flex items-center gap-1 p-2 rounded-[2.5rem] shadow-2xl border theme-transition ${lifeMode ? 'bg-[#111]/80 border-gray-800 backdrop-blur-2xl shadow-black/80' : 'bg-white/80 border-white/60 backdrop-blur-2xl shadow-blue-900/10'}`}>
                                <NavBtn icon={<Wallet size={20}/>} active={activeTab === 'dashboard'} onClick={() => handleTabChange('dashboard')} lifeMode={lifeMode} />
                                <NavBtn icon={<MapIcon size={20}/>} active={activeTab === 'map'} onClick={() => handleTabChange('map')} lifeMode={lifeMode} />
                                <NavBtn icon={<Globe2 size={20}/>} active={activeTab === 'travel'} onClick={() => handleTabChange('travel')} lifeMode={lifeMode} />
                                <NavBtn icon={<PieChart size={20}/>} active={activeTab === 'flow'} onClick={() => handleTabChange('flow')} lifeMode={lifeMode} />
                                <div className="w-px h-8 bg-gray-400/20 mx-1"></div>
                                <div onClick={() => handleTabChange('hub')} className={`w-12 h-12 rounded-full flex items-center justify-center text-white shadow-lg cursor-pointer ${activeTab === 'hub' ? 'bg-[#00e0b0] text-black ring-4 ring-[#00e0b0]/30' : 'bg-black'}`}><Shield size={20} /></div>
                            </div>
                        </div>

                        {/* AI MODAL */}
                        {showAiModal && (
                            <div className="absolute inset-0 z-[60] flex items-end sm:items-center justify-center p-4 bg-black/60 backdrop-blur-md animate-in fade-in">
                                <div className={`w-full max-w-sm rounded-[2rem] overflow-hidden shadow-2xl animate-in slide-in-from-bottom ${lifeMode ? 'bg-gray-900 border border-gray-800' : 'bg-white'}`}>
                                    <div className="p-4 bg-gradient-to-r from-[#00e0b0] to-blue-500 flex justify-between items-center text-white"><div className="flex items-center gap-3"><Bot size={24} /><span className="font-bold text-sm">ImaginAI</span></div><button onClick={() => setShowAiModal(false)}><X size={20} /></button></div>
                                    <div className="h-64 p-4 overflow-y-auto space-y-4"><div className="flex justify-start"><div className="max-w-[85%] p-3 rounded-2xl text-sm bg-gray-100 text-gray-800">{aiMessages[0].text}</div></div></div>
                                    <div className="p-3 border-t"><input className="w-full bg-transparent outline-none text-sm" placeholder="Escriu..." /></div>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        const root = createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>